@model FilterProductViewModel
@{
    ViewData["Title"] = "لیست محصولات";
    var categories = ViewData["Categories"] as List<ProductCategory>;
}


<div class="row">
    <div class="col-xl-3 col-lg-4 col-md-5 responsive-sidebar">
        <div class="ui-sticky ui-sticky-top">
            <div class="ui-box sidebar-widgets">
                <form asp-controller="Product" asp-action="Index" method="get">
                    <input type="hidden" asp-for="PageId" />
                    <input type="hidden" asp-for="FilterMinPrice" />
                    <input type="hidden" asp-for="FilterMaxPrice" />

                    @*<input type="hidden" asp-for="SelectedMinPrice" />
                    <input type="hidden" asp-for="SelectedMaxPrice" />*@
                    <!-- start of widget -->
                    <div class="widget p-0 mb-3">
                        <div class="widget-content widget--free-shipping">
                            <div class="free-shipping--detail">
                                <div class="title">ارسال رایگان سفارش</div>
                                <div class="subtitle">سفارش‌های بالای ۳۰۰ هزار تومان</div>
                            </div>
                            <div class="free-shipping--banner">
                                <img src="/Template/theme-assets/images/theme/free-shipping--banner.png" alt="ارسال رایگان سفارش">
                            </div>
                        </div>
                    </div>
                    <!-- end of widget -->
                    <!-- start of widget -->
                    <div class="widget mb-3">
                        <div class="widget-title">دسته‌بندی نتایج</div>
                        <div class="widget-content widget--category-results">
                            <ul>
                                @foreach (var category in categories.Where(s => s.ParentId == null))
                                {
                                    if (categories.Any(s => s.ParentId == category.Id))
                                    {
                                        <li class="category--arrow-left">
                                            <a asp-controller="Product"
                                       asp-action="Index"
                                       asp-route-CategoryId="@category.Id">@category.Title</a>
                                            <ul>
                                                @foreach (var subCategory in categories.Where(s => s.ParentId == category.Id))
                                                {
                                                    <li>
                                                        <a asp-controller="Product"
                                               asp-action="Index"
                                               asp-route-CategoryId="@subCategory.Id"
                                                           class="current">@subCategory.Title</a>
                                                    </li>
                                                }
                                            </ul>
                                        </li>
                                    }
                                    else
                                    {
                                        <li>
                                            <a asp-controller="Product"
                                       asp-action="Index"
                                       asp-route-Category="@category.Title"
                                               class="current">@category.Title</a>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                    <!-- end of widget -->
                    <!-- start of widget -->
                    <div class="widget mb-3">
                        <div class="widget-title">جستجو در نتایج:</div>
                        <div class="widget-content widget--search">
                            <div class="form-element-row">
                                <input asp-for="Title" type="text" class="form-control" placeholder="نام محصول یا…">
                                <i class="ri-search-line icon"></i>
                            </div>
                        </div>
                    </div>
                    <!-- end of widget -->
                    <!-- start of widget -->
                
                    <!-- end of widget -->
                    <button type="submit" class="btn btn-info mt-3">
                        فیلتر
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-xl-9 col-lg-8 col-md-7">
        <!-- start of breadcrumb -->
        @* <nav class="mb-2" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">خانه</a></li>
                <li class="breadcrumb-item"><a href="#">کالای دیجیتال</a></li>
                <li class="breadcrumb-item"><a href="#">موبایل</a></li>
                <li class="breadcrumb-item"><a href="#">گوشی موبایل</a></li>
            </ol>
        </nav> *@
        <!-- end of breadcrumb -->
        <button class="btn btn-primary mb-3 d-md-none toggle-responsive-sidebar">
            فیلتر پیشرفته
            <i class="ri-equalizer-fill ms-1"></i>
        </button>
        <div class="listing-products">
            <div class="listing-products-header mb-4">
                <div class="listing-products-filter-container do-simplebar me-4" data-simplebar="init">
                    <div class="simplebar-wrapper" style="margin: 0px;">
                        <div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask">
                           
                        </div><div class="simplebar-placeholder" style="width: auto; height: 55px;"></div>
                    </div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar simplebar-visible" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar simplebar-visible" style="height: 0px; display: none;"></div></div>
                </div>
            </div>
            <div class="listing-products-content">
                <!-- start of tab-content -->
                <div class="tab-content" id="sort-tabContent">
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade show active" id="most-visited" role="tabpanel" aria-labelledby="most-visited-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    @if (Model.Products != null)
                                    {
                                        @foreach (var product in Model.Products)
                                        {
                                            <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                                <div class="product-card">
                                                    <div class="product-thumbnail">
                                                        <a asp-controller="Product" asp-action="ProductDetail" asp-route-productId="@product.Id">
                                                            <img src="@PathExtension.ProductImageOrigin@product.ImageName"
                                                                 alt="@product.Title">
                                                        </a>
                                                    </div>
                                                    <div class="product-card-body">
                                                        <h2 class="product-title">
                                                            <a asp-controller="Product" asp-action="ProductDetail" asp-route-productId="@product.Id">
                                                                @product.Title
                                                            </a>
                                                        </h2>
                                                        <div class="product-variant">
                                                            @foreach (var colorCode in product.ProductColors.Where(s => !s.IsDelete).Select(s => s.ColorCode).ToList())
                                                            {
                                                                <span class="color"
                                                                      style="background-color: @colorCode;"></span>
                                                            }
                                                            <span>+</span>
                                                        </div>
                                                        <div class="product-price fa-num">
                                                            <span class="price-now">
                                                                @product.Price.ToString("#,0") <span class="currency">تومان</span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="product-card-footer">
                                                        <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                            <div class="product-actions">
                                                                <ul>
                                                                    <li>
                                                                        <a href="#" data-bs-toggle="tooltip"
                                                                           data-bs-placement="top" title=""
                                                                           data-bs-original-title="افزودن به سبد خرید"
                                                                           aria-label="افزودن به سبد خرید">
                                                                            <i class="ri-shopping-cart-line"></i>
                                                                        </a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="#" data-bs-toggle="tooltip"
                                                                           data-bs-placement="top" title=""
                                                                           data-bs-original-title="مشاهده سریع"
                                                                           aria-label="مشاهده سریع"
                                                                           data-remodal-target="quick-view-modal">
                                                                            <i class="ri-search-line"></i>
                                                                        </a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="#" data-bs-toggle="tooltip"
                                                                           data-bs-placement="top" title=""
                                                                           data-bs-original-title="افزودن به علاقمندی"
                                                                           aria-label="افزودن به علاقمندی">
                                                                            <i class="ri-heart-3-line"></i>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="product-rating fa-num">
                                                                <i class="ri-star-fill star"></i>
                                                                <strong>۴.۴</strong>
                                                                <span>(۴۳۶)</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    }
                                    else
                                    {
                                        <p>محصولی در دسته بندی مورد نظر یافت نشد</p>
                                    }
                                  
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade" id="best-selling" role="tabpanel" aria-labelledby="best-selling-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                        <!-- start of product-card -->
                                        <div class="product-card">
                                            <div class="product-thumbnail">
                                                <a href="#">
                                                    <img src="./theme-assets/images/products/01.jpg" alt="product title">
                                                </a>
                                            </div>
                                            <div class="product-card-body">
                                                <h2 class="product-title">
                                                    <a href="#">
                                                        گوشی موبایل اپل مدل iPhone 13 A2634 دو
                                                        سیم‌ کارت
                                                        ظرفیت 128
                                                        گیگابایت و رم 4 گیگابایت
                                                    </a>
                                                </h2>
                                                <div class="product-variant">
                                                    <span class="color" style="background-color: #d4d4d4;"></span>
                                                    <span class="color" style="background-color: #e86841;"></span>
                                                    <span class="color" style="background-color: #b82c32;"></span>
                                                    <span>+</span>
                                                </div>
                                                <div class="product-price fa-num">
                                                    <div class="d-flex align-items-center">
                                                        <del class="price-old">26,900,000</del>
                                                        <span class="discount ms-2">%2</span>
                                                    </div>
                                                    <span class="price-now">26,249,000 <span class="currency">تومان</span></span>
                                                </div>
                                            </div>
                                            <div class="product-card-footer">
                                                <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                    <div class="product-actions">
                                                        <ul>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به سبد خرید" aria-label="افزودن به سبد خرید"><i class="ri-shopping-cart-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="مشاهده سریع" aria-label="مشاهده سریع" data-remodal-target="quick-view-modal"><i class="ri-search-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به علاقمندی" aria-label="افزودن به علاقمندی"><i class="ri-heart-3-line"></i></a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="product-rating fa-num">
                                                        <i class="ri-star-fill star"></i>
                                                        <strong>۴.۴</strong>
                                                        <span>(۴۳۶)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of product-card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade" id="most-popular" role="tabpanel" aria-labelledby="most-popular-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                        <!-- start of product-card -->
                                        <div class="product-card">
                                            <div class="product-thumbnail">
                                                <a href="#">
                                                    <img src="./theme-assets/images/products/01.jpg" alt="product title">
                                                </a>
                                            </div>
                                            <div class="product-card-body">
                                                <h2 class="product-title">
                                                    <a href="#">
                                                        گوشی موبایل اپل مدل iPhone 13 A2634 دو
                                                        سیم‌ کارت
                                                        ظرفیت 128
                                                        گیگابایت و رم 4 گیگابایت
                                                    </a>
                                                </h2>
                                                <div class="product-variant">
                                                    <span class="color" style="background-color: #d4d4d4;"></span>
                                                    <span class="color" style="background-color: #e86841;"></span>
                                                    <span class="color" style="background-color: #b82c32;"></span>
                                                    <span>+</span>
                                                </div>
                                                <div class="product-price fa-num">
                                                    <div class="d-flex align-items-center">
                                                        <del class="price-old">26,900,000</del>
                                                        <span class="discount ms-2">%2</span>
                                                    </div>
                                                    <span class="price-now">26,249,000 <span class="currency">تومان</span></span>
                                                </div>
                                            </div>
                                            <div class="product-card-footer">
                                                <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                    <div class="product-actions">
                                                        <ul>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به سبد خرید" aria-label="افزودن به سبد خرید"><i class="ri-shopping-cart-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="مشاهده سریع" aria-label="مشاهده سریع" data-remodal-target="quick-view-modal"><i class="ri-search-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به علاقمندی" aria-label="افزودن به علاقمندی"><i class="ri-heart-3-line"></i></a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="product-rating fa-num">
                                                        <i class="ri-star-fill star"></i>
                                                        <strong>۴.۴</strong>
                                                        <span>(۴۳۶)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of product-card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade" id="newest" role="tabpanel" aria-labelledby="newest-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                        <!-- start of product-card -->
                                        <div class="product-card">
                                            <div class="product-thumbnail">
                                                <a href="#">
                                                    <img src="./theme-assets/images/products/01.jpg" alt="product title">
                                                </a>
                                            </div>
                                            <div class="product-card-body">
                                                <h2 class="product-title">
                                                    <a href="#">
                                                        گوشی موبایل اپل مدل iPhone 13 A2634 دو
                                                        سیم‌ کارت
                                                        ظرفیت 128
                                                        گیگابایت و رم 4 گیگابایت
                                                    </a>
                                                </h2>
                                                <div class="product-variant">
                                                    <span class="color" style="background-color: #d4d4d4;"></span>
                                                    <span class="color" style="background-color: #e86841;"></span>
                                                    <span class="color" style="background-color: #b82c32;"></span>
                                                    <span>+</span>
                                                </div>
                                                <div class="product-price fa-num">
                                                    <div class="d-flex align-items-center">
                                                        <del class="price-old">26,900,000</del>
                                                        <span class="discount ms-2">%2</span>
                                                    </div>
                                                    <span class="price-now">26,249,000 <span class="currency">تومان</span></span>
                                                </div>
                                            </div>
                                            <div class="product-card-footer">
                                                <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                    <div class="product-actions">
                                                        <ul>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به سبد خرید" aria-label="افزودن به سبد خرید"><i class="ri-shopping-cart-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="مشاهده سریع" aria-label="مشاهده سریع" data-remodal-target="quick-view-modal"><i class="ri-search-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به علاقمندی" aria-label="افزودن به علاقمندی"><i class="ri-heart-3-line"></i></a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="product-rating fa-num">
                                                        <i class="ri-star-fill star"></i>
                                                        <strong>۴.۴</strong>
                                                        <span>(۴۳۶)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of product-card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade" id="cheapest" role="tabpanel" aria-labelledby="cheapest-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                        <!-- start of product-card -->
                                        <div class="product-card">
                                            <div class="product-thumbnail">
                                                <a href="#">
                                                    <img src="./theme-assets/images/products/01.jpg" alt="product title">
                                                </a>
                                            </div>
                                            <div class="product-card-body">
                                                <h2 class="product-title">
                                                    <a href="#">
                                                        گوشی موبایل اپل مدل iPhone 13 A2634 دو
                                                        سیم‌ کارت
                                                        ظرفیت 128
                                                        گیگابایت و رم 4 گیگابایت
                                                    </a>
                                                </h2>
                                                <div class="product-variant">
                                                    <span class="color" style="background-color: #d4d4d4;"></span>
                                                    <span class="color" style="background-color: #e86841;"></span>
                                                    <span class="color" style="background-color: #b82c32;"></span>
                                                    <span>+</span>
                                                </div>
                                                <div class="product-price fa-num">
                                                    <div class="d-flex align-items-center">
                                                        <del class="price-old">26,900,000</del>
                                                        <span class="discount ms-2">%2</span>
                                                    </div>
                                                    <span class="price-now">26,249,000 <span class="currency">تومان</span></span>
                                                </div>
                                            </div>
                                            <div class="product-card-footer">
                                                <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                    <div class="product-actions">
                                                        <ul>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به سبد خرید" aria-label="افزودن به سبد خرید"><i class="ri-shopping-cart-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="مشاهده سریع" aria-label="مشاهده سریع" data-remodal-target="quick-view-modal"><i class="ri-search-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به علاقمندی" aria-label="افزودن به علاقمندی"><i class="ri-heart-3-line"></i></a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="product-rating fa-num">
                                                        <i class="ri-star-fill star"></i>
                                                        <strong>۴.۴</strong>
                                                        <span>(۴۳۶)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of product-card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                    <!-- start of tab-pane -->
                    <div class="tab-pane fade" id="most-expensive" role="tabpanel" aria-labelledby="most-expensive-tab">
                        <div class="ui-box pt-3 pb-0 px-0 mb-4">
                            <div class="ui-box-content">
                                <div class="row mx-0">
                                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
                                        <!-- start of product-card -->
                                        <div class="product-card">
                                            <div class="product-thumbnail">
                                                <a href="#">
                                                    <img src="./theme-assets/images/products/01.jpg" alt="product title">
                                                </a>
                                            </div>
                                            <div class="product-card-body">
                                                <h2 class="product-title">
                                                    <a href="#">
                                                        گوشی موبایل اپل مدل iPhone 13 A2634 دو
                                                        سیم‌ کارت
                                                        ظرفیت 128
                                                        گیگابایت و رم 4 گیگابایت
                                                    </a>
                                                </h2>
                                                <div class="product-variant">
                                                    <span class="color" style="background-color: #d4d4d4;"></span>
                                                    <span class="color" style="background-color: #e86841;"></span>
                                                    <span class="color" style="background-color: #b82c32;"></span>
                                                    <span>+</span>
                                                </div>
                                                <div class="product-price fa-num">
                                                    <div class="d-flex align-items-center">
                                                        <del class="price-old">26,900,000</del>
                                                        <span class="discount ms-2">%2</span>
                                                    </div>
                                                    <span class="price-now">26,249,000 <span class="currency">تومان</span></span>
                                                </div>
                                            </div>
                                            <div class="product-card-footer">
                                                <div class="d-flex align-items-center justify-content-between border-top mt-2 py-2">
                                                    <div class="product-actions">
                                                        <ul>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به سبد خرید" aria-label="افزودن به سبد خرید"><i class="ri-shopping-cart-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="مشاهده سریع" aria-label="مشاهده سریع" data-remodal-target="quick-view-modal"><i class="ri-search-line"></i></a>
                                                            </li>
                                                            <li>
                                                                <a href="#" data-bs-toggle="tooltip" data-bs-placement="top" title="" data-bs-original-title="افزودن به علاقمندی" aria-label="افزودن به علاقمندی"><i class="ri-heart-3-line"></i></a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="product-rating fa-num">
                                                        <i class="ri-star-fill star"></i>
                                                        <strong>۴.۴</strong>
                                                        <span>(۴۳۶)</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- end of product-card -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end of tab-pane -->
                </div>
                <!-- end of tab-content -->
                <div class="row">
                    <div class="col-12">
                        <nav class="border-top py-4">
                            <!-- start of pagination -->
                            <ul class="pagination justify-content-center fa-num">
                                @if (Model.StarPage < Model.PageId)
                                {
                                    <li class="page-item">
                                        <a class="page-link" onclick="FillPageId(@(Model.PageId - 1)) aria-label="Previous">
                                            <i class="ri-arrow-right-s-line"></i>
                                        </a>
                                    </li>
                                }

                                @for (int i = Model.StarPage; i <= Model.EndPage; i++)
                                {
                                    <li class="page-item @(Model.PageId == i ? "active":"")"><a class="page-link" onclick="FillPageId(@i)">@i</a></li>
                                }

                                @if (Model.EndPage > Model.PageId)
                                {
                                    <li class="page-item">
                                        <a class="page-link" onclick="FillPageId(@(Model.PageId + 1))" aria-label="Next">
                                            <i class="ri-arrow-left-s-line"></i>
                                        </a>
                                    </li>
                                }

                            </ul>
                            <!-- end of pagination -->
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="responsive-sidebar-overlay"></div>
    </div>
</div>

